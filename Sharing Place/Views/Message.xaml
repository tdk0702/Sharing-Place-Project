<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:essentials="http://schemas.microsoft.com/dotnet/maui/essentials/2022/04"
             x:Class="Sharing_Place.Views.Message"
             Title="Message">
    <ContentPage.Resources>
        <ResourceDictionary>
            <TapGestureRecognizer x:Key="TapSendMessage" Tapped="OnSendMessageTapped"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid BackgroundColor="LightPink">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackLayout Orientation="Horizontal" 
                     Padding="5" 
                     Spacing="10" 
                     BackgroundColor="#27D276"
                     Grid.Row="0">
            <Image x:Name="UserImage"
                   WidthRequest="50"
                   HeightRequest="50"/>
            <VerticalStackLayout Padding="5" Spacing="10">
                <Label x:Name="UserNameLabel"
                       VerticalOptions="Center"
                       HorizontalOptions="StartAndExpand"
                       FontAttributes="Bold"/>
                <Label x:Name="UserStatusLabel"
                       VerticalOptions="Center"
                       HorizontalOptions="StartAndExpand"/>
            </VerticalStackLayout>
            <Image Source="telephone1.png" 
                   WidthRequest="20" 
                   HeightRequest="20" 
                   HorizontalOptions="EndAndExpand"/>
            <Image Source="video2.png" 
                   WidthRequest="20" 
                   HeightRequest="20" 
                   HorizontalOptions="End"/>
        </StackLayout>

        <!-- Messages List -->
        <ScrollView x:Name="MessagesScrollView" Grid.Row="1">
            <StackLayout x:Name="MessagesStack" Padding="10"/>
        </ScrollView>

        <!-- Emotion and File Stacks -->
        <StackLayout Orientation="Vertical" BackgroundColor="White" Padding="10" Spacing="10" Grid.Row="2">
            <Grid x:Name="EmotionGrid" BackgroundColor="LightGray" Padding="5" IsVisible="False">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button Text="ðŸ˜Š" Clicked="OnSendEmotionTapped" Grid.Row="0" Grid.Column="0"/>
                <Button Text="ðŸ˜¢" Clicked="OnSendEmotionTapped" Grid.Row="0" Grid.Column="1"/>
                <Button Text="ðŸ‘" Clicked="OnSendEmotionTapped" Grid.Row="0" Grid.Column="2"/>
                <Button Text="ðŸ˜‚" Clicked="OnSendEmotionTapped" Grid.Row="0" Grid.Column="3"/>
                <Button Text="â¤ï¸" Clicked="OnSendEmotionTapped" Grid.Row="0" Grid.Column="4"/>
                <Button Text="ðŸ˜" Clicked="OnSendEmotionTapped" Grid.Row="1" Grid.Column="0"/>
                <Button Text="ðŸ˜®" Clicked="OnSendEmotionTapped" Grid.Row="1" Grid.Column="1"/>
                <Button Text="ðŸ˜Ž" Clicked="OnSendEmotionTapped" Grid.Row="1" Grid.Column="2"/>
                <Button Text="ðŸ¤”" Clicked="OnSendEmotionTapped" Grid.Row="1" Grid.Column="3"/>
                <Button Text="ðŸ‘" Clicked="OnSendEmotionTapped" Grid.Row="1" Grid.Column="4"/>
                <Button Text="ðŸŽ‰" Clicked="OnSendEmotionTapped" Grid.Row="2" Grid.Column="0"/>
                <Button Text="ðŸ™" Clicked="OnSendEmotionTapped" Grid.Row="2" Grid.Column="1"/>
                <Button Text="ðŸ’ª" Clicked="OnSendEmotionTapped" Grid.Row="2" Grid.Column="2"/>
                <Button Text="ðŸ‘‹" Clicked="OnSendEmotionTapped" Grid.Row="2" Grid.Column="3"/>
                <Button Text="ðŸ˜¡" Clicked="OnSendEmotionTapped" Grid.Row="2" Grid.Column="4"/>
                <Button Text="ðŸ˜²" Clicked="OnSendEmotionTapped" Grid.Row="3" Grid.Column="0"/>
                <Button Text="ðŸ˜’" Clicked="OnSendEmotionTapped" Grid.Row="3" Grid.Column="1"/>
                <Button Text="ðŸ‘Œ" Clicked="OnSendEmotionTapped" Grid.Row="3" Grid.Column="2"/>
            </Grid>
            <StackLayout x:Name="FileStack" Orientation="Horizontal" IsVisible="False" BackgroundColor="LightGray" Padding="10">
                <Button Text="Picture" Clicked="OnSelectFileTapped"/>
                <Button Text="Video" Clicked="OnSelectFileTapped"/>
            </StackLayout>
            <StackLayout Orientation="Horizontal" BackgroundColor="White" Spacing="10">
                <Image Source="happiness.png" WidthRequest="20" HeightRequest="20" HorizontalOptions="Start">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnEmotionButtonClicked"/>
                    </Image.GestureRecognizers>
                </Image>
                <Image Source="camera1.png" WidthRequest="20" HeightRequest="20" HorizontalOptions="Start">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnFileButtonClicked"/>
                    </Image.GestureRecognizers>
                </Image>
                <Entry x:Name="MessageEntry" Placeholder="Type Message" HorizontalOptions="FillAndExpand"/>
                <Image Source="send1.png" WidthRequest="20" HeightRequest="20" HorizontalOptions="End">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnSendMessageTapped"/>
                    </Image.GestureRecognizers>
                </Image>
            </StackLayout>
        </StackLayout>
    </Grid>
</ContentPage>
